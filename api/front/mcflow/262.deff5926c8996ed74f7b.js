"use strict";(self.webpackChunkmcflow=self.webpackChunkmcflow||[]).push([[262],{1923:(b,A,n)=>{n.d(A,{q:()=>P});var T=n(5917),p=n(3342),o=n(7716),f=n(6458);let h=(()=>{class e{constructor(i,c){this.snackbar=i,this.errorHandlerService=c,this.title=this.errorHandlerService.title,this.error=this.errorHandlerService.error}ngOnInit(){}openSnackBar(i){this.error=i,this.snackbar.openFromComponent(e,{horizontalPosition:"center",duration:4e3})}}return e.\u0275fac=function(i){return new(i||e)(o.Y36(f.ux),o.Y36(P))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-core"]],decls:6,vars:2,consts:[[1,"error"],[1,"error__title"],[1,"error__title__header"],[1,"error__main"]],template:function(i,c){1&i&&(o.TgZ(0,"div",0),o.TgZ(1,"span",1),o.TgZ(2,"h2",2),o._uU(3),o.qZA(),o.qZA(),o.TgZ(4,"span",3),o._uU(5),o.qZA(),o.qZA()),2&i&&(o.xp6(3),o.Oqu(c.title),o.xp6(2),o.Oqu(c.error))},styles:[".error[_ngcontent-%COMP%]{width:500px}"]}),e})(),P=(()=>{class e{constructor(i){this._snackbar=i,this.title="An error has occurred",this.error=""}openSnackBar(i){this.error=i,this._snackbar.openFromComponent(h,{horizontalPosition:"center",duration:9e3,panelClass:["red-snackbar"]})}openSuccessSnackBar(i){this._snackbar.open(i,"dismiss",{duration:3e3,horizontalPosition:"center",panelClass:["green-snackbar"]})}handleError(i="operation",c){return v=>(0,T.of)(c).pipe((0,p.b)(()=>this.openSnackBar(v.name)))}}return e.\u0275fac=function(i){return new(i||e)(o.LFG(f.ux))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},262:(b,A,n)=>{n.r(A),n.d(A,{ReferralModule:()=>K});var T=n(8583),p=n(4655),o=n(205),f=n(3342),h=n(5304),P=n(4945),e=n(7716),Z=n(5401),i=n(1841),c=n(5257),v=n(2340);let N=(()=>{class t{constructor(r){this.http=r,this.httpOptions={headers:new i.WM({"Content-Type":"application/json"})}}getUserWallet(r){return this.http.get(`${v.N.baseApiUrl}/wallet/referral/${r}`).pipe((0,c.q)(1),(0,f.b)(a=>{this.referralBalance=a.referralBalance,this.userName=a.userName,this.referred=a.referred,this.userPackage=a.userPackage,console.log(this.userPackage)}))}referral(){return this.referralP(this.userName,this.userPackage,this.referred,this.referralBalance).subscribe()}referralP(r,a,l,u){return this.http.put(`${v.N.baseApiUrl}/user/referral`,{userName:r,userPackage:a,ref:l,refB:u},this.httpOptions)}getUserPackage(r){return this.http.get(`${v.N.baseApiUrl}/user/package/${r}`).pipe((0,f.b)(a=>(this.userPackage=a,a)))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(i.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var q=n(1923),x=n(5070),d=n(3679),O=n(3738),S=n(8295),R=n(9983);const _=["form"];function k(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your first name."),e.qZA())}function B(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your last name."),e.qZA())}function I(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your username."),e.qZA())}function J(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your email"),e.qZA())}function F(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your phone number."),e.qZA())}function Y(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your password."),e.qZA())}function Q(t,s){1&t&&(e.TgZ(0,"mat-hint",30),e._uU(1,"Please enter your coupon code. "),e.qZA())}const H=function(){return["/","landing","terms-and-conditions"]},w=function(){return["/","landing","privacy-policy"]},z=function(){return["/","auth"]},L=function(){return["/","landing"]},E=[{path:"",component:(()=>{class t{constructor(r,a,l,u,m){this.authService=r,this.referralService=a,this.router=l,this.route=u,this.errorHandlerService=m}ngOnInit(){this.getUsernameFromUrl(),this.referralService.getUserWallet(this.urlUsername).pipe((0,f.b)(r=>{this.referred=r.referred,this.userPackage=r.userPackage,this.referralBalance=r.referralBalance}),(0,h.K)(r=>(this.errorHandlerService.openSnackBar("The user associated with the referral link does not exist"),this.router.navigateByUrl("/auth"),(0,o._)(r)))).subscribe(()=>{this.errorHandlerService.openSuccessSnackBar("User Found")})}onSubmit(){const{firstName:r,lastName:a,userName:l,email:u,password:m,phoneNumber:C,couponCode:M}=this.form.value;if(!(r&&a&&l&&u&&m&&C&&M))return null;const y={firstName:r,lastName:a,userName:l,email:u,phoneNumber:C,userPackage:this.userPackage,password:m};return this.authService.checkCouponCode(M).pipe((0,h.K)(g=>(this.errorHandlerService.openSnackBar("The coupon code is not valid"),(0,o._)(g))),(0,f.b)(({userPackage:g})=>{this.userPackage=g}),(0,P.X)(1)).subscribe(()=>this.authService.register(y).pipe((0,h.K)(g=>(this.errorHandlerService.openSnackBar("Check the values you input in the form"),(0,o._)(g)))).subscribe(()=>{this.registerWallet(),this.referralService.referral(),this.authService.updatePackage(l,this.userPackage).subscribe(),this.errorHandlerService.openSuccessSnackBar("Registered successfully"),this.router.navigateByUrl("/auth")}))}registerWallet(){const{userName:r,userPackage:a}=this.form.value;return this.authService.registerWallet({userName:r,userPackage:a,mcfPoints:0,referralBalance:0}).subscribe()}getUsernameFromUrl(){return this.urlUsername=this.route.parent.snapshot.url[1].path,this.route.parent.snapshot.url[1].path}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(Z.e),e.Y36(N),e.Y36(p.F0),e.Y36(p.gz),e.Y36(q.q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-referral"]],viewQuery:function(r,a){if(1&r&&e.Gf(_,5),2&r){let l;e.iGM(l=e.CRH())&&(a.form=l.first)}},decls:80,vars:18,consts:[["name","description","content","sign in or sign up"],["name","some-property","content","some-value"],[1,"title-container"],["src","../../assets/images/logo.png","alt",""],[3,"ngSubmit"],["form","ngForm"],["appearance","outline",1,"mat-form","form-input"],["matNativeControl","","placeholder","James","required","true","name","firstName","ngModel","","type","text"],["firstNameInput","ngModel"],["color","warn",4,"ngIf"],["matNativeControl","","placeholder","May","required","true","name","lastName","ngModel","","type","text"],["lastNameInput","ngModel"],["matNativeControl","","placeholder","May01","required","true","name","userName","ngModel","","type","text"],["userNameInput","ngModel"],["matNativeControl","","required","true","name","email","ngModel","","type","email","placeholder","james@email.com"],["emailInput","ngModel"],["matNativeControl","","placeholder","07007070070","required","true","name","phoneNumber","ngModel","","type","text"],["phoneNumberInput","ngModel"],["placeholder","Pick a secure password","matNativeControl","","required","true","name","password","ngModel","","type","password"],["passwordInput","ngModel"],["appearance","fill",1,"mat-form","form-input"],["placeholder","Input your coupon code","matNativeControl","","required","true","name","couponCode","ngModel","","type","text"],["couponCodeInput","ngModel"],["placeholder","The person who referred you","disabled","","name","urlUsername","matNativeControl","","ngModel","","type","text",3,"value"],["urlUsernameInput","ngModel"],[1,"terms-and-conditions"],[2,"color","green",3,"routerLink"],["type","submit",3,"disabled"],[1,"toggle-text"],["color","primary",2,"cursor","pointer",3,"routerLink"],["color","warn"]],template:function(r,a){if(1&r&&(e.TgZ(0,"section"),e.TgZ(1,"ng-helmet"),e.TgZ(2,"title"),e._uU(3,"Referral Form"),e.qZA(),e._UZ(4,"meta",0),e._UZ(5,"meta",1),e.qZA(),e.TgZ(6,"div",2),e._UZ(7,"img",3),e.qZA(),e.TgZ(8,"form",4,5),e.NdJ("ngSubmit",function(){return a.onSubmit()}),e.TgZ(10,"mat-card"),e.TgZ(11,"p"),e.TgZ(12,"mat-form-field",6),e.TgZ(13,"mat-label"),e._uU(14,"First Name"),e.qZA(),e._UZ(15,"input",7,8),e.YNc(17,k,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(18,"p"),e.TgZ(19,"mat-form-field",6),e.TgZ(20,"mat-label"),e._uU(21,"Last Name"),e.qZA(),e._UZ(22,"input",10,11),e.YNc(24,B,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(25,"p"),e.TgZ(26,"mat-form-field",6),e.TgZ(27,"mat-label"),e._uU(28,"Username"),e.qZA(),e._UZ(29,"input",12,13),e.YNc(31,I,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(32,"p"),e.TgZ(33,"mat-form-field",6),e.TgZ(34,"mat-label"),e._uU(35,"Email"),e.qZA(),e._UZ(36,"input",14,15),e.YNc(38,J,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(39,"p"),e.TgZ(40,"mat-form-field",6),e.TgZ(41,"mat-label"),e._uU(42,"Phone Number"),e.qZA(),e._UZ(43,"input",16,17),e.YNc(45,F,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(46,"p"),e.TgZ(47,"mat-form-field",6),e.TgZ(48,"mat-label"),e._uU(49,"Password"),e.qZA(),e._UZ(50,"input",18,19),e.YNc(52,Y,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(53,"p"),e.TgZ(54,"mat-form-field",20),e.TgZ(55,"mat-label"),e._uU(56,"Coupon Code"),e.qZA(),e._UZ(57,"input",21,22),e.YNc(59,Q,2,0,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(60,"p"),e.TgZ(61,"mat-form-field",6),e.TgZ(62,"mat-label"),e._uU(63),e.qZA(),e._UZ(64,"input",23,24),e.qZA(),e.qZA(),e.TgZ(66,"div",25),e._uU(67," By clicking Agree & Join, you agree to the Mcflow "),e.TgZ(68,"a",26),e._uU(69,"Terms of service"),e.qZA(),e._uU(70," and "),e.TgZ(71,"a",26),e._uU(72,"Privacy Policy"),e.qZA(),e.qZA(),e.TgZ(73,"button",27),e._uU(74," Sign in "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",28),e.TgZ(76,"p",29),e._uU(77," Already on Mcflow? "),e.qZA(),e.TgZ(78,"p",29),e._uU(79," | Back to Home Page "),e.qZA(),e.qZA(),e.qZA()),2&r){const l=e.MAs(9),u=e.MAs(16),m=e.MAs(23),C=e.MAs(30),M=e.MAs(37),U=e.MAs(44),y=e.MAs(51),g=e.MAs(58);e.xp6(17),e.Q6J("ngIf",!u.valid&&u.touched),e.xp6(7),e.Q6J("ngIf",!m.valid&&m.touched),e.xp6(7),e.Q6J("ngIf",!C.valid&&C.touched),e.xp6(7),e.Q6J("ngIf",!M.valid&&M.touched),e.xp6(7),e.Q6J("ngIf",!U.valid&&U.touched),e.xp6(7),e.Q6J("ngIf",!y.valid&&y.touched),e.xp6(7),e.Q6J("ngIf",!g.valid&&g.touched),e.xp6(4),e.Oqu(a.urlUsername),e.xp6(1),e.Q6J("value",a.urlUsername),e.xp6(4),e.Q6J("routerLink",e.DdM(14,H)),e.xp6(3),e.Q6J("routerLink",e.DdM(15,w)),e.xp6(2),e.Q6J("disabled",!l.valid),e.xp6(3),e.Q6J("routerLink",e.DdM(16,z)),e.xp6(2),e.Q6J("routerLink",e.DdM(17,L))}},directives:[x.rr,x.lK,d._Y,d.JL,d.F,O.a8,S.KE,S.hX,R.Nt,d.Fj,d.Q7,d.JJ,d.On,T.O5,p.yS,p.rH,S.bx],styles:[".title-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:24px}.title-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px}form[_ngcontent-%COMP%]{max-width:400px;margin:auto}form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #e1e1e1;padding:24px;margin-top:20px}form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .terms-and-conditions[_ngcontent-%COMP%]{font-size:12px;text-align:center;margin-top:16px}form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   .terms-and-conditions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;margin:0}form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px;height:48px;width:100%;color:#fff;background-color:green;border:1px solid green;border-radius:5px;cursor:pointer}form[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background-color:#a5e4a5;color:#302f2f}.toggle-text[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.toggle-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;cursor:pointer;margin-left:8px;margin-top:15px;color:green}.toggle-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),t})()}];let j=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(E)],p.Bz]}),t})();var W=n(801);let K=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[x.YA.forRoot({baseTitle:"| Mcflow"}),T.ez,j,W.q,d.u5]]}),t})()}}]);